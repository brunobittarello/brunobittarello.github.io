!function(e){var t={};function i(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=5)}([function(e,t){e.exports=PIXI},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(4);class n{constructor(e){n.application=e,this.deckCtrl=new r.DeckController(e.stage),this.currTime=Date.now()}update(e){this.elapsed=Date.now()-this.currTime,this.currTime=Date.now();var t=.001*this.elapsed;this.deckCtrl.update(e,t)}}t.Core=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Card=class extends PIXI.Container{constructor(e){super();var t=new PIXI.Sprite(e);t.anchor.set(.5),t.scale.set(.5),this.addChild(t)}startMoving(e,t,i){this.startX=e.x,this.startY=e.y,this.targetX=t,this.targetY=i,this.isMoving=!0,this.moveTimer=0}update(e){this.isMoving&&this.move(e)}move(e){this.moveTimer+=e;var t=.5*this.moveTimer;if(t>=1)return this.position.x=this.targetX,this.position.y=this.targetY,void(this.isMoving=!1);this.position.x=this.lerp(this.startX,this.targetX,t),this.position.y=this.lerp(this.startY,this.targetY,t)}lerp(e,t,i){return(1-i)*e+i*t}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(2),n=i(0),s=144,o=4;t.Deck=class extends PIXI.Container{constructor(){super(),this.cards=new Array}populate(e){for(var t=0;t<s;t++){var i=new r.Card(e);i.position.x=o*t,i.position.y=0,this.cards[t]=i,this.addChild(this.cards[t])}}removeCard(){return 0===this.cards.length?null:this.cards.pop()}addCard(e){var t=this.toLocal(e.toGlobal(new n.Point(0,0)));e.startMoving(t,o*this.cards.length,0),this.cards.push(e),this.addChild(e),e.position.set(t.x,t.y)}isReadyToSwap(){return this.cards.forEach(e=>{if(!0===e.isMoving)return!1}),!0}update(e){this.cards.forEach(t=>{t.update(e)})}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(3),n=i(1);t.DeckController=class{constructor(e){this.time=0,this.texture=PIXI.Texture.fromImage("./assets/card.png"),this.deckSource=new r.Deck,this.deckTarget=new r.Deck,this.deckSource.populate(this.texture),this.deckSource.position.set(100,100),this.deckTarget.position.set(100,600),console.log("Card created: "+this.deckSource.children.length),e.addChild(this.deckSource),e.addChild(this.deckTarget),this.fpsLabel=new PIXI.Text("fps: "),e.addChild(this.fpsLabel)}update(e,t){this.fpsLabel.text="fps: "+n.Core.application.ticker.FPS.toString().substr(0,4),t>.5&&(t=.5),this.time+=t,this.time>1&&(this.time-=1,this.transferCard()),this.deckSource.update(t),this.deckTarget.update(t)}transferCard(){var e=this.deckSource.removeCard();null===e?!0===this.deckTarget.isReadyToSwap()&&this.swapDecks():this.deckTarget.addCard(e)}swapDecks(){var e=this.deckTarget;this.deckTarget=this.deckSource,this.deckSource=e}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(1),n=i(0);var s=a(),o=new n.Application(1280*s,720*s,{backgroundColor:1087931});o.stage.scale.set(s),document.getElementById("display").appendChild(o.view);const c=new r.Core(o);function d(){!function(e){console.log("resize to w = "+1280*e+" h = "+720*e+" s = "+e),o.renderer.resize(.9*window.innerWidth,.9*window.innerHeight),o.stage.scale.set(e)}(a())}function a(){console.log("document.documentElement "+document.documentElement.clientWidth+"/"+document.documentElement.clientHeight),console.log("window "+window.innerWidth+"/"+window.innerHeight),console.log("window.screen "+window.screen.width+"/"+window.screen.height);var e=Math.min(document.documentElement.clientWidth,window.innerWidth,window.screen.width),t=Math.min(document.documentElement.clientHeight,window.innerHeight,window.screen.height);console.log("SCREEN "+e+"/"+t);var i=Math.min(e-50,1230)/1280,r=Math.min(t-50,670)/720;return i<r?(console.log("WWW"),.9*i):(console.log("HHH"),.9*r)}o.ticker.add(function(e){c.update(e)}),d(),window.addEventListener("resize",function(){d()})}]);
//# sourceMappingURL=main.bundle.js.map