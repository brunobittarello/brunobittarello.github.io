!function(e){var t={};function r(i){if(t[i])return t[i].exports;var s=t[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(i,s,function(t){return e[t]}.bind(null,s));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=5)}([function(e,t){e.exports=PIXI},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=r(4);class s{constructor(e){s.application=e,this.deckCtrl=new i.DeckController(e.stage),this.currTime=Date.now()}update(e){this.elapsed=Date.now()-this.currTime,this.currTime=Date.now();var t=.001*this.elapsed;this.deckCtrl.update(e,t)}}t.Core=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Card=class extends PIXI.Container{constructor(e){super();var t=new PIXI.Sprite(e);t.anchor.set(.5),t.scale.set(.5),this.addChild(t)}startMoving(e,t,r){this.startX=e.x,this.startY=e.y,this.targetX=t,this.targetY=r,this.isMoving=!0,this.moveTimer=0}update(e){this.isMoving&&this.move(e)}move(e){this.moveTimer+=e;var t=.5*this.moveTimer;if(t>=1)return this.position.x=this.targetX,this.position.y=this.targetY,void(this.isMoving=!1);this.position.x=this.lerp(this.startX,this.targetX,t),this.position.y=this.lerp(this.startY,this.targetY,t)}lerp(e,t,r){return(1-r)*e+r*t}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=r(2),s=r(0),o=144,n=4;t.Deck=class extends PIXI.Container{constructor(){super(),this.cards=new Array}populate(e){for(var t=0;t<o;t++){var r=new i.Card(e);r.position.x=n*t,r.position.y=0,this.cards[t]=r,this.addChild(this.cards[t])}}removeCard(){return 0===this.cards.length?null:this.cards.pop()}addCard(e){var t=this.toLocal(e.toGlobal(new s.Point(0,0)));e.startMoving(t,n*this.cards.length,0),this.cards.push(e),this.addChild(e),e.position.set(t.x,t.y)}isReadyToSwap(){return this.cards.forEach(e=>{if(!0===e.isMoving)return!1}),!0}update(e){this.cards.forEach(t=>{t.update(e)})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=r(3),s=r(1);t.DeckController=class{constructor(e){this.time=0,this.texture=PIXI.Texture.fromImage("./assets/card.png"),this.deckSource=new i.Deck,this.deckTarget=new i.Deck,this.deckSource.populate(this.texture),this.deckSource.position.set(100,100),this.deckTarget.position.set(100,600),console.log("Card created: "+this.deckSource.children.length),e.addChild(this.deckSource),e.addChild(this.deckTarget),this.fpsLabel=new PIXI.Text("fps: "),e.addChild(this.fpsLabel)}update(e,t){this.fpsLabel.text="fps: "+s.Core.application.ticker.FPS.toString().substr(0,4),t>.5&&(t=.5),this.time+=t,this.time>1&&(this.time-=1,this.transferCard()),this.deckSource.update(t),this.deckTarget.update(t)}transferCard(){var e=this.deckSource.removeCard();null===e?!0===this.deckTarget.isReadyToSwap()&&this.swapDecks():this.deckTarget.addCard(e)}swapDecks(){var e=this.deckTarget;this.deckTarget=this.deckSource,this.deckSource=e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=r(1),s=r(0);var o=c(),n=new s.Application(1280*o,720*o,{backgroundColor:1087931});n.stage.scale.set(o),document.getElementById("display").appendChild(n.view);const a=new i.Core(n);function c(){var e=Math.min(document.documentElement.clientWidth,window.innerWidth,window.screen.width),t=Math.min(document.documentElement.clientHeight,window.innerHeight,window.screen.height);console.log("SCREEN "+e+"/"+t);var r=Math.min(e-50,1230),i=Math.min(t-50,670),s=r/1280,o=i/720;return s<o?(console.log("resize WWW to w = "+r+" h = "+720*s+" s = "+s),console.log("from w = "+r+" h = "+i),.9*s):(console.log("resize HHH to w = "+1280*o+" h = "+720*o+" s = "+o),console.log("from w = "+r+" h = "+i),.9*o)}n.ticker.add(function(e){a.update(e)}),window.addEventListener("resize",function(){!function(e){n.renderer.resize(1280*e,720*e),n.stage.scale.set(e)}(c())})}]);
//# sourceMappingURL=main.bundle.js.map